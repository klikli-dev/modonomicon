"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9993],{9262:function(e,t,o){o.r(t),o.d(t,{assets:function(){return d},contentTitle:function(){return a},default:function(){return h},frontMatter:function(){return r},metadata:function(){return s},toc:function(){return c}});var n=o(5893),i=o(1151);const r={sidebar_position:30},a="Step 3: Creating the Book",s={id:"getting-started/step-by-step-with-datagen/step3",title:"Step 3: Creating the Book",description:"Now it is time to add code to generate our book, a first category and an entry with a page.",source:"@site/docs/getting-started/step-by-step-with-datagen/step3.md",sourceDirName:"getting-started/step-by-step-with-datagen",slug:"/getting-started/step-by-step-with-datagen/step3",permalink:"/modonomicon/docs/getting-started/step-by-step-with-datagen/step3",draft:!1,unlisted:!1,editUrl:"https://github.com/klikli-dev/modonomicon/tree/documentation/docs/getting-started/step-by-step-with-datagen/step3.md",tags:[],version:"current",sidebarPosition:30,frontMatter:{sidebar_position:30},sidebar:"tutorialSidebar",previous:{title:"Step 2: A first look at the Demo Project",permalink:"/modonomicon/docs/getting-started/step-by-step-with-datagen/step2"},next:{title:"Step 4: Adding texts",permalink:"/modonomicon/docs/getting-started/step-by-step-with-datagen/step4"}},d={},c=[{value:"Changes to DemoBookProvider.java",id:"changes-to-demobookproviderjava",level:2},{value:"New Class File: FeaturesCategoryProvider",id:"new-class-file-featurescategoryprovider",level:2},{value:"generateEntryMap()",id:"generateentrymap",level:3},{value:"generateEntries()",id:"generateentries",level:3},{value:"generateCategory()",id:"generatecategory",level:3},{value:"makeMultiblockEntry()",id:"makemultiblockentry",level:3},{value:"Generate our updated book",id:"generate-our-updated-book",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"step-3-creating-the-book",children:"Step 3: Creating the Book"}),"\n",(0,n.jsx)(t.p,{children:"Now it is time to add code to generate our book, a first category and an entry with a page.\nWe will focus on the structure and layout of the book in this step, and add the texts in the next step."}),"\n",(0,n.jsxs)(t.p,{children:["Depending on how familiar you are with java you can either just take a look at the ",(0,n.jsx)(t.a,{href:"https://github.com/klikli-dev/modonomicon-demo-book/tree/guide/step3",children:"full code for this step"})," and make changes on your own, or download the complete new step into a new folder."]}),"\n",(0,n.jsxs)(t.p,{children:["You can view the final code for this step in the branch for step 3: ",(0,n.jsx)(t.a,{href:"https://github.com/klikli-dev/modonomicon-demo-book/tree/guide/step3",children:"https://github.com/klikli-dev/modonomicon-demo-book/tree/guide/step3"})]}),"\n",(0,n.jsx)(t.p,{children:'Using the green "Code" Button and "Download ZIP" you can download the code for this step as a zip file to compare to your code.'}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsx)(t.p,{children:"There is no branch for step 2, because that was only reviewing the files you downloaded in step 1!"})}),"\n",(0,n.jsx)(t.h2,{id:"changes-to-demobookproviderjava",children:"Changes to DemoBookProvider.java"}),"\n",(0,n.jsxs)(t.p,{children:["Let's take a look at how our existing class changed: ",(0,n.jsx)(t.strong,{children:(0,n.jsx)(t.a,{href:"https://github.com/klikli-dev/modonomicon-demo-book/compare/guide/step1..guide/step3?diff=split#diff-bae90ab237cc5e78b10e53c7ad47160887a6536b0f8cb361732336cf3f986782",children:"See Diff"})})," (on the left we see the old version, on the right, the new)"]}),"\n",(0,n.jsxs)(t.p,{children:["First we create our features category (we'll get to what ",(0,n.jsx)(t.code,{children:"FeaturesCategoryProvider"}),' is in the next step!) with the id "features".']}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'var featuresCategory = new FeaturesCategoryProvider(this, "features").generate();\n'})}),"\n",(0,n.jsx)(t.p,{children:"Then we add it to the book model:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:".withCategories(\n        featuresCategory\n);\n"})}),"\n",(0,n.jsx)(t.h2,{id:"new-class-file-featurescategoryprovider",children:"New Class File: FeaturesCategoryProvider"}),"\n",(0,n.jsxs)(t.p,{children:["Additionally we can see that a new file was created containing the class ",(0,n.jsx)(t.code,{children:"FeaturesCategoryProvider"}),".\nIn Modonomicon CategoryProviders are helper classes that make it easier to create category content (that is, entries and pages)."]}),"\n",(0,n.jsxs)(t.p,{children:["When looking at ",(0,n.jsx)(t.strong,{children:(0,n.jsx)(t.a,{href:"https://github.com/klikli-dev/modonomicon-demo-book/compare/guide/step1..guide/step3?diff=split#diff-35d687e007c80093b71ad3400be6e689d5641e8f772b6881d0ccf08642f04598",children:"the Diff"})})," we see nothing on the left, indicating that the entire file is new."]}),"\n",(0,n.jsx)(t.p,{children:"Let's go briefly over the relevant methods we find in there:"}),"\n",(0,n.jsx)(t.h3,{id:"generateentrymap",children:(0,n.jsx)(t.a,{href:"https://github.com/klikli-dev/modonomicon-demo-book/compare/guide/step1..guide/step3?diff=split#diff-35d687e007c80093b71ad3400be6e689d5641e8f772b6881d0ccf08642f04598R16",children:"generateEntryMap()"})}),"\n",(0,n.jsxs)(t.p,{children:["The EntryMap is a helper that allows us to visualize where entries will be placed in the category view of the book. We use ",(0,n.jsx)(t.code,{children:"_"})," to represent an empty slot, and any other character (numbers, letters and other unicode characters) to represent an entry."]}),"\n",(0,n.jsx)(t.admonition,{type:"tip",children:(0,n.jsxs)(t.p,{children:["Uppercase and lowercase letters are considered separate characters - if you have both ",(0,n.jsx)(t.code,{children:"m"})," and ",(0,n.jsx)(t.code,{children:"M"})," in the map these can be used to designate two different entry locations!"]})}),"\n",(0,n.jsx)(t.p,{children:"Later you will see that we then hand a character to each entry, which will allow the entry to look up it's coordinates in the in-game-view."}),"\n",(0,n.jsx)(t.h3,{id:"generateentries",children:(0,n.jsx)(t.a,{href:"https://github.com/klikli-dev/modonomicon-demo-book/compare/guide/step1..guide/step3?diff=split#diff-35d687e007c80093b71ad3400be6e689d5641e8f772b6881d0ccf08642f04598R28",children:"generateEntries()"})}),"\n",(0,n.jsx)(t.p,{children:"In this method we are supposed to create our BookEntry objects, and call this.add() to store them in the category."}),"\n",(0,n.jsx)(t.p,{children:"Currently we have:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:"var multiblockEntry = this.add(this.makeMultiblockEntry('m'));\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Which creates an entry showcasing a multiblock (as we will see below), at the location of the ",(0,n.jsx)(t.code,{children:"m"})," character in our entry map."]}),"\n",(0,n.jsx)(t.h3,{id:"generatecategory",children:(0,n.jsx)(t.a,{href:"https://github.com/klikli-dev/modonomicon-demo-book/compare/guide/step1..guide/step3?diff=split#diff-35d687e007c80093b71ad3400be6e689d5641e8f772b6881d0ccf08642f04598R36",children:"generateCategory()"})}),"\n",(0,n.jsx)(t.p,{children:"Here we create our category - currently that is very basic, we simply provide a resource location as ID and a string as translation key for the category name (Don't worry about the name yet - the in game texts will be supplied in the next step), and an icon (the nether star)."}),"\n",(0,n.jsx)(t.admonition,{type:"caution",children:(0,n.jsx)(t.p,{children:"BookCategories support .withEntries() to add entries, however you are not supposed to do that here - the CategoryProvider does that for you."})}),"\n",(0,n.jsx)(t.h3,{id:"makemultiblockentry",children:(0,n.jsx)(t.a,{href:"https://github.com/klikli-dev/modonomicon-demo-book/compare/guide/step1..guide/step3?diff=split#diff-35d687e007c80093b71ad3400be6e689d5641e8f772b6881d0ccf08642f04598R46",children:"makeMultiblockEntry()"})}),"\n",(0,n.jsx)(t.p,{children:"This method does the heavy lifting by creating an entry with pages."}),"\n",(0,n.jsx)(t.admonition,{type:"tip",children:(0,n.jsxs)(t.p,{children:["To create your own additional entries, all you have to do is copy & adjust this method, and then update ",(0,n.jsx)(t.code,{children:"generateEntries()"})," to also call your new method and hand over the return value to ",(0,n.jsx)(t.code,{children:"this.add(...)"})," as seen above for makeMultiblockEntry()."]})}),"\n",(0,n.jsx)(t.admonition,{type:"tip",children:(0,n.jsxs)(t.p,{children:["Note the use of ",(0,n.jsx)(t.code,{children:"this.context()"}),". We will use it a lot - whenever we work on a new piece of the book we update the context, which then allows us to retrieve context information (such as the translation key to set the text of a specific page) easily."]})}),"\n",(0,n.jsx)(t.p,{children:"At the bottom, after creating the pages, it creates the entry with the given location character, which will be looked up in the entry map.\nFinally it adds the pages to the entry."}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsx)(t.p,{children:"For now let's not worry about multiblocks - we're using a demo one that comes with modonomicon. Later you can define your own multiblocks."})}),"\n",(0,n.jsx)(t.p,{children:"This will generate a book for us. Let's test how that works!"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["In the terminal, run ",(0,n.jsx)(t.code,{children:"./gradlew runData"})," to generate the json file(s)."]}),"\n",(0,n.jsxs)(t.li,{children:["After it is complete, run ",(0,n.jsx)(t.code,{children:"./gradlew runClient"})," to start Minecraft."]}),"\n",(0,n.jsx)(t.li,{children:"Create or join a world with cheats enabled."}),"\n",(0,n.jsxs)(t.li,{children:["Switch to creative mode with ",(0,n.jsx)(t.code,{children:"/gamemode creative"}),"."]}),"\n",(0,n.jsx)(t.li,{children:'Open the inventory and look for the "Modonomicon" creative tab or the search tab.'}),"\n",(0,n.jsx)(t.li,{children:"There will be two purple books - the builtin modonomicon demos - and one red book, the one we just generated."}),"\n",(0,n.jsxs)(t.li,{children:["Take it into your hotbar and take a look at it","\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["You will notice a weird text for the name and tooltip: ",(0,n.jsx)(t.code,{children:"book.modonomicon_demo_book.demo.name"})," and ",(0,n.jsx)(t.code,{children:"book.modonomicon_demo_book.demo.tooltip"})," This is because we haven't added any translations yet."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.li,{children:"Right click with the book in hand."}),"\n",(0,n.jsx)(t.li,{children:"Crash! That's ok - if we do not add any categories the book does not know what to display. Let's fix that!"}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"generate-our-updated-book",children:"Generate our updated book"}),"\n",(0,n.jsx)(t.p,{children:"Let's take a look at our entry!"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["In the terminal, run ",(0,n.jsx)(t.code,{children:"./gradlew runData"})," to generate the json file(s)."]}),"\n",(0,n.jsxs)(t.li,{children:["After it is complete, run ",(0,n.jsx)(t.code,{children:"./gradlew runClient"})," to start Minecraft."]}),"\n",(0,n.jsx)(t.li,{children:"Re-join our old world."}),"\n",(0,n.jsx)(t.li,{children:"Right click with the book in hand."}),"\n",(0,n.jsxs)(t.li,{children:["Find and click the entry in the book (you may have to zoom/pan to find it)\n",(0,n.jsx)(t.img,{alt:"Entry",src:o(3106).Z+"",width:"1920",height:"1009"})]}),"\n",(0,n.jsx)(t.li,{children:"We don't have texts yet, but we see a multiblock, so that's pretty good, right?"}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},3106:function(e,t,o){t.Z=o.p+"assets/images/step3-create-entry-eaa2c11fdbcd15cb6eb992b668e9f02a.png"},1151:function(e,t,o){o.d(t,{Z:function(){return s},a:function(){return a}});var n=o(7294);const i={},r=n.createContext(i);function a(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);