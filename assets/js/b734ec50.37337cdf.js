"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2360],{9270:function(o,n,i){i.r(n),i.d(n,{assets:function(){return a},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return d},metadata:function(){return s},toc:function(){return r}});var e=i(5893),t=i(1151);const d={sidebar_position:40},c="Custom Conditions",s={id:"advanced/custom-conditions",title:"Custom Conditions",description:"Mods can add custom conditions that can be used to lock entries or categories. To this end you need to:",source:"@site/docs/advanced/custom-conditions.md",sourceDirName:"advanced",slug:"/advanced/custom-conditions",permalink:"/modonomicon/docs/advanced/custom-conditions",draft:!1,unlisted:!1,editUrl:"https://github.com/klikli-dev/modonomicon/tree/documentation/docs/advanced/custom-conditions.md",tags:[],version:"current",sidebarPosition:40,frontMatter:{sidebar_position:40},sidebar:"tutorialSidebar",previous:{title:"Integrations with other Mods",permalink:"/modonomicon/docs/advanced/integrations"}},a={},r=[{value:"Condition Class",id:"condition-class",level:2},{value:"Condition Registration",id:"condition-registration",level:2},{value:"Condition Datagen Model",id:"condition-datagen-model",level:2},{value:"Usage",id:"usage",level:2}];function l(o){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",...(0,t.a)(),...o.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h1,{id:"custom-conditions",children:"Custom Conditions"}),"\n",(0,e.jsx)(n.p,{children:"Mods can add custom conditions that can be used to lock entries or categories. To this end you need to:"}),"\n",(0,e.jsxs)(n.ol,{children:["\n",(0,e.jsxs)(n.li,{children:['Create ResourceLocation for the new condition (e.g. "mymod',":my_condition",'")']}),"\n",(0,e.jsx)(n.li,{children:"Create a custom condition class"}),"\n",(0,e.jsx)(n.li,{children:"Register the custom condition"}),"\n",(0,e.jsx)(n.li,{children:"For datagen: create a condition model class"}),"\n",(0,e.jsx)(n.li,{children:"Finally use the condition in your book"}),"\n"]}),"\n",(0,e.jsx)(n.admonition,{type:"tip",children:(0,e.jsx)(n.p,{children:"The ResourceLocation is what you will use in your entries and categories to gate them behind your custom condition."})}),"\n",(0,e.jsx)(n.h2,{id:"condition-class",children:"Condition Class"}),"\n",(0,e.jsxs)(n.p,{children:["Conditions need to extend ",(0,e.jsx)(n.code,{children:"BookCondition"})," in the package ",(0,e.jsx)(n.code,{children:"com.klikli_dev.modonomicon.book.conditions"}),".",(0,e.jsx)(n.br,{}),"\n","In addition to implementing the interface methods that your IDE will suggest you need two static methods ",(0,e.jsx)(n.code,{children:"fromJson"})," and ",(0,e.jsx)(n.code,{children:"fromNetwork"})," which you will need when registering the condition."]}),"\n",(0,e.jsxs)(n.p,{children:["in ",(0,e.jsx)(n.code,{children:"getType()"})," return your ResourceLocation."]}),"\n",(0,e.jsxs)(n.p,{children:["See ",(0,e.jsx)(n.a,{href:"https://github.com/klikli-dev/modonomicon/blob/HEAD/common/src/main/java/com/klikli_dev/modonomicon/book/conditions/BookAdvancementCondition.java",children:"https://github.com/klikli-dev/modonomicon/blob/HEAD/common/src/main/java/com/klikli_dev/modonomicon/book/conditions/BookAdvancementCondition.java"})," for an example condition."]}),"\n",(0,e.jsx)(n.h2,{id:"condition-registration",children:"Condition Registration"}),"\n",(0,e.jsxs)(n.p,{children:["To register the condition call LoaderRegistry.registerConditionLoader(...).",(0,e.jsx)(n.br,{}),"\n","For the BookAdvancementCondition this call looks as follows: ",(0,e.jsx)(n.code,{children:"registerConditionLoader(Condition.ADVANCEMENT, BookAdvancementCondition::fromJson, BookAdvancementCondition::fromNetwork);"})]}),"\n",(0,e.jsxs)(n.p,{children:["This needs to be called from both the client and server side mod initialization.",(0,e.jsx)(n.br,{}),"\n","In Fabric: Call in ",(0,e.jsx)(n.code,{children:"onInitialize"})," in your ",(0,e.jsx)(n.code,{children:"ModInitializer"}),".",(0,e.jsx)(n.br,{}),"\n","In (Neo)Forge: Call in ",(0,e.jsx)(n.code,{children:"onCommonSetup"})," (your ",(0,e.jsx)(n.code,{children:"FMLCommonSetupEvent"})," handler)."]}),"\n",(0,e.jsx)(n.h2,{id:"condition-datagen-model",children:"Condition Datagen Model"}),"\n",(0,e.jsx)(n.p,{children:"The model class helps you to generate the condition json files via DataGen."}),"\n",(0,e.jsxs)(n.p,{children:["See ",(0,e.jsx)(n.a,{href:"https://github.com/klikli-dev/modonomicon/blob/2a067357bacaf3e15a5f490520a4headaf64807fe83e/common/src/main/java/com/klikli_dev/modonomicon/api/datagen/book/condition/BookAdvancementConditionModel.java",children:"https://github.com/klikli-dev/modonomicon/blob/2a067357bacaf3e15a5f490520a4headaf64807fe83e/common/src/main/java/com/klikli_dev/modonomicon/api/datagen/book/condition/BookAdvancementConditionModel.java"})," for a reference model class."]}),"\n",(0,e.jsxs)(n.p,{children:["(On 1.20.1 it looks a bit more complicated:\n",(0,e.jsx)(n.a,{href:"https://github.com/klikli-dev/modonomicon/blob/bdf639c835908393198f695999c70f2ac53e154c/common/src/main/java/com/klikli_dev/modonomicon/api/datagen/book/condition/BookAdvancementConditionModel.java",children:"https://github.com/klikli-dev/modonomicon/blob/bdf639c835908393198f695999c70f2ac53e154c/common/src/main/java/com/klikli_dev/modonomicon/api/datagen/book/condition/BookAdvancementConditionModel.java"})," )"]}),"\n",(0,e.jsxs)(n.admonition,{type:"tip",children:[(0,e.jsx)(n.mdxAdmonitionTitle,{}),(0,e.jsx)(n.p,{children:"You need not register the model."})]}),"\n",(0,e.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,e.jsx)(n.p,{children:"On your entry or category, add:"}),"\n",(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:"language-json",children:'{\n  ...\n  "condition": {\n      "type": "mymod:my_condition"\n  },\n  ...\n}\n'})}),"\n",(0,e.jsxs)(n.p,{children:["See also ",(0,e.jsx)(n.a,{href:"../basics/unlock-conditions",children:"Unlock Conditions"})," for more information on how to use conditions."]})]})}function m(o={}){const{wrapper:n}={...(0,t.a)(),...o.components};return n?(0,e.jsx)(n,{...o,children:(0,e.jsx)(l,{...o})}):l(o)}},1151:function(o,n,i){i.d(n,{Z:function(){return s},a:function(){return c}});var e=i(7294);const t={},d=e.createContext(t);function c(o){const n=e.useContext(d);return e.useMemo((function(){return"function"==typeof o?o(n):{...n,...o}}),[n,o])}function s(o){let n;return n=o.disableParentContext?"function"==typeof o.components?o.components(t):o.components||t:c(o.components),e.createElement(d.Provider,{value:n},o.children)}}}]);